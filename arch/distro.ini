# Configuration specific to each distribution (INI style file)

# As of now only the few variables listed below are used.

[base]
image = quay.io/archlinux/archlinux
# directories which are shared between the containers of a distribution when
# base.shared_root is set to true
shared_root_dirs = /etc;/opt;/usr;/var
# additional scripts that need to be copied to the container in $ZBOX_TARGET_SCRIPTS_DIR
# (init.sh, init-base.sh and init-user.sh scripts are normally required for all distributions
#  and do not need to be specified here)
scripts = pkgdeps;list_fmt.awk

# The commands here will be run as normal userns mapped user, so use sudo if the command
# needs to run as root inside the container
[pkgmgr]
install = /usr/bin/paru -S --needed {quiet} {opt_dep}
quiet_flag = --noconfirm
opt_deps = $ZBOX_TARGET_SCRIPTS_DIR/pkgdeps
opt_dep_flag = --asdeps
uninstall = /usr/bin/paru -R {quiet} {purge} {remove_deps}
purge_flag = --nosave
remove_deps_flag = --recursive
update_meta = /usr/bin/paru -Sy
update = /usr/bin/paru -S --needed {quiet}
update_all = /usr/bin/paru -Syu {quiet}
cleanup = /bin/yes | /usr/bin/paru -Sccd
info = /usr/bin/pacman -Qi
list = /usr/bin/pacman -Qe {packages} | \
       /usr/bin/awk -v COL_NAME='\033[37m' -v COL_VER='\033[33m' -v COL_RESET='\033[0m' \
           'BEGIN {{ printf "%sName = %sVersion%s\n\n", COL_NAME, COL_VER, COL_RESET }}
                  {{ printf "%s%s = %s%s%s\n", COL_NAME, $1, COL_VER, $2, COL_RESET }}'
list_all = /usr/bin/pacman -Q {packages} | \
           /usr/bin/awk -v COL_NAME='\033[37m' -v COL_VER='\033[33m' -v COL_RESET='\033[0m' \
               'BEGIN {{ printf "%sName = %sVersion%s\n\n", COL_NAME, COL_VER, COL_RESET }}
                      {{ printf "%s%s = %s%s%s\n", COL_NAME, $1, COL_VER, $2, COL_RESET }}'
list_long = /usr/bin/pacman -Qie {packages} | \
            /usr/bin/awk -f $ZBOX_TARGET_SCRIPTS_DIR/list_fmt.awk
list_all_long = /usr/bin/pacman -Qi {packages} | \
                /usr/bin/awk -f $ZBOX_TARGET_SCRIPTS_DIR/list_fmt.awk
list_files = /usr/bin/pacman -Qlq
pager = /usr/bin/bat --style=grid,numbers
